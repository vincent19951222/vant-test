# Project Context

## Purpose
这是一个原生微信小程序项目，名为"知识库-原生"。项目旨在构建一个知识管理和查询的应用，使用微信原生小程序技术栈开发，提供轻量级的知识内容浏览、搜索和管理功能。

## Tech Stack
- **微信小程序原生框架** - 基础开发框架
- **Skyline 渲染引擎** - 提供更快的渲染性能和更丰富的布局能力
- **glass-easel 组件框架** - 微信小程序的组件化开发框架
- **ES6+ JavaScript** - 使用现代 JavaScript 语法
- **WXML/WXSS** - 微信小程序的模板和样式语言

## Project Conventions

### Code Style
- **命名规范**:
  - 页面文件和组件使用 kebab-case（如 `user-profile`, `nav-bar`）
  - JavaScript 变量和函数使用 camelCase
  - 常量使用 UPPER_SNAKE_CASE
  - 类名使用 PascalCase
- **文件组织**:
  - 页面文件放在 `pages/[页面名]/` 目录下（包含 .js, .json, .wxml, .wxss）
  - 公共组件放在 `components/[组件名]/` 目录下
  - 工具函数放在 `utils/` 目录
- **注释规范**:
  - 公共函数必须包含 JSDoc 注释
  - 复杂逻辑需要行内注释说明
- **代码格式化**:
  - 使用 2 个空格缩进
  - 行尾不使用分号（遵循微信小程序官方风格）
  - 对象属性末尾添加逗号

### Architecture Patterns
- **页面结构**:
  - 每个页面独立成目录，包含完整的 .js, .json, .wxml, .wxss 文件
  - 页面逻辑层（.js）负责数据处理和网络请求
  - 视图层（.wxml）负责UI展示，保持逻辑简单
- **组件化**:
  - 通用UI组件封装为自定义组件
  - 组件保持高内聚、低耦合
  - 通过 properties 传递数据，通过 triggerEvent 发送事件
- **数据管理**:
  - 使用小程序原生的 setData 进行数据绑定
  - 复杂应用考虑使用 Redux 或 MobX 进行状态管理
- **网络请求**:
  - 封装统一的 request 工具函数
  - 统一处理错误码和登录态

### Testing Strategy
- **手动测试**: 使用微信开发者工具进行真机调试
- **体验版测试**: 发布体验版供团队成员测试
- **性能测试**: 使用开发者工具的性能面板检查页面性能
- **兼容性测试**: 在不同手机型号和微信版本上测试

### Git Workflow
- **分支策略**:
  - main: 主分支，保持稳定可发布状态
  - feature/[功能名]: 功能开发分支
  - bugfix/[问题描述]: Bug修复分支
- **提交规范**: 使用中文描述变更内容
  - 格式: `[类型] 简短描述`
  - 类型: 新增, 修改, 修复, 优化, 重构等
- **代码审查**: 所有合并到 main 分支的代码都需要审查

## Domain Context
- **微信小程序生态**:
  - 需要微信开发者工具进行开发和调试
  - 发布需要经过微信审核
  - 受限于小程序的包大小限制（2MB，可分包至20MB）
  - 需要处理微信登录态和用户授权
- **知识库概念**:
  - 项目涉及知识的分类、存储、检索和展示
  - 可能需要富文本或Markdown内容展示
  - 考虑内容的离线缓存策略
  - 支持搜索和标签功能

## Important Constraints
- **技术约束**:
  - 微信小程序基础库版本要求 >= 2.0.0
  - Skyline 引擎要求基础库 >= 3.0.0
  - 单个包大小限制 2MB，总分包大小限制 20MB
  - 网络请求必须使用 HTTPS（开发环境可配置不校验域名）
- **性能约束**:
  - 页面渲染时间应 < 1秒
  - setData 数据量不宜过大，避免频繁调用
  - 图片资源需要优化，避免内存溢出
- **安全约束**:
  - 所有网络接口需要配置合法域名
  - 敏感数据需要加密存储
  - 遵循微信小程序的安全规范

## External Dependencies
- **微信服务**:
  - 微信登录服务（获取用户 OpenID）
  - 微信支付（如需付费功能）
  - 微信订阅消息推送
- **第三方服务**（待定）:
  - 内容管理系统（CMS）API
  - 搜索服务（Elasticsearch 等）
  - 对象存储服务（图片、文件上传）
- **开发工具**:
  - 微信开发者工具
  - 小程序代码质量检测工具
